// Script to create or use the database 'my_db'.

const { MongoClient } = require('mongodb');

async function createOrUseDatabase(client, dbName) {
    try {
        const databasesList = await client.db().admin().listDatabases();
        const dbExists = databasesList.databases.some(db => db.name === dbName);
        
        if (dbExists) {
            console.log(`Database '${dbName}' already exists.`);
        } else {
            console.log(`Database '${dbName}' was created.`);
        }
    } catch (error) {
        console.error(`An error occurred: ${error}`);
    }
}

async function main() {
    const uri = "mongodb://localhost:27017"; // Replace with your MongoDB connection string
    const client = new MongoClient(uri);

    try {
        await client.connect();
        const dbName = "my_db";
        await createOrUseDatabase(client, dbName);
    } catch (error) {
        console.error(`An error occurred: ${error}`);
    } finally {
        await client.close();
    }
}

main().catch(console.error);
